@page
@model WebApplication1.Pages.Account.CreditModel
@attribute [Microsoft.AspNetCore.Authorization.Authorize]
@{
    ViewData["Title"] = "我的信用";
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h4 mb-0">我的信用</h1>
    <a class="btn btn-link" asp-page="/Index">返回目录</a>
</div>

@if (Model.Profile is null)
{
    <div class="alert alert-warning">未找到信用信息（请联系管理员初始化客户资料）</div>
}
else
{
    <div class="table-responsive">
        <table class="table table-hover align-middle">
            <thead>
                <tr>
                    <th>信用等级</th>
                    <th class="text-end">透支额度</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>L@((int)Model.Profile.CreditLevel)</td>
                    <td class="text-end">@(WebApplication1.Data.Entities.CreditLevelRules.UnlimitedOverdraft(Model.Profile.CreditLevel) ? "无限" : ("￥ " + Model.Profile.OverdraftLimit.ToString("0.00")))</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="small text-muted">
        折扣规则：L1=10% 不可透支；L2=15% 不可透支；L3=15% 可透支(限额)；L4=20% 可透支(限额)；L5=25% 可透支(不限额)
    </div>
}
