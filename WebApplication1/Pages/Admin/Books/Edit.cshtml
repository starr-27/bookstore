@page "{id:long}"
@model WebApplication1.Pages.Admin.Books.EditModel
@attribute [Microsoft.AspNetCore.Authorization.Authorize(Policy = "AdminOnly")]
@{
    ViewData["Title"] = "编辑图书";
}

@if (Model.Input is null)
{
    <div class="alert alert-warning">未找到图书</div>
}
else
{
    <h1 class="h4 mb-3">编辑图书</h1>

    <form method="post" class="row g-3">
        <div class="col-md-4">
            <label class="form-label">书号（BookNo）</label>
            <input class="form-control" asp-for="Input.BookNo" />
            <span class="text-danger" asp-validation-for="Input.BookNo"></span>
        </div>

        <div class="col-md-4">
            <label class="form-label">分册标识（可选）</label>
            <input class="form-control" asp-for="Input.VolumeNo" placeholder="例如：Vol.1 / 上册 / A" />
            <span class="text-danger" asp-validation-for="Input.VolumeNo"></span>
        </div>

        <div class="col-md-8">
            <label class="form-label">书名</label>
            <input class="form-control" asp-for="Input.Title" />
            <span class="text-danger" asp-validation-for="Input.Title"></span>
        </div>

        <div class="col-md-4">
            <label class="form-label">书目种类</label>
            <select class="form-select" asp-for="Input.CategoryId">
                <option value="">（未分类）</option>
                @foreach (var c in Model.CategoryOptions)
                {
                    <option value="@c.CategoryId">@c.CategoryName</option>
                }
            </select>
        </div>

        <div class="col-md-4">
            <label class="form-label">价格</label>
            <input class="form-control" asp-for="Input.Price" />
            <span class="text-danger" asp-validation-for="Input.Price"></span>
        </div>

        <div class="col-md-4">
            <label class="form-label">库存</label>
            <input class="form-control" asp-for="Input.StockQty" />
            <span class="text-danger" asp-validation-for="Input.StockQty"></span>
        </div>

        <div class="col-12">
            <button class="btn btn-primary" type="submit">保存</button>
            <a class="btn btn-link" asp-page="/Admin/Books/Index">返回</a>
        </div>
    </form>

    @section Scripts {
        <partial name="_ValidationScriptsPartial" />
    }
}
